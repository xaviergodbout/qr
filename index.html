<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Generator</title>
    <link rel="icon" type="image/x-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJdSURBVHgBxVfrkQFBEG7KfzIgBBkgAjJABIjAisBmgAjIABEgAjKwIpibr696a3Z2dvahyn5VfdvX8+iefs0g0lBKBZre6neAri10NzQT6u+C6kEAA96a6VA9iGCAohrRtAWNRqMwXS4XJvD7/T5eP5/PmR8OhzQajZifzWY8ZqPlsqrX6/HiLLxeL1Ysc7E5vqKo2+2yQb49YtjpCZHexJvCu92O553P58Lj0+lUOdSpls+45XJJ9/s9IZOTCzCOeaDJZMIynFwrZy8EQcCyx+Ph1OE1AJtfr1ffFIqiiOcg1p3OfzHhCyNOpxN9Pp/UIQobUAZyUgB5oMNAYRiyxyQRXWjSl+j3+6xMEg68jnfh9V97AO7GiSU3wJeB1wA74bLmmC42ax2JWMmA5/MZN5YspQLpA5ChP4gMITHn4X/pFQm4+kBRctU5GX1kMBjEMvQGF1J3QRG3C5CAUnooNZSkeAAEGfZbrVY8t91up/avlIRQig1tY3yAcWJsAlVCkNeqBZVCgOSDmw6HQ3yyxSL5Xsm7rLDevowKJyEglwlIL1RlkXdZmcgNgc8Al4upZBWkktDsZLhMbJj9AW6Vh4kJ6SNZ47khME9oe4CsPgCyPeAbT3ncpXS9XjN/u914IWTH49GrQCdrwuUiA5UKAVwm9Sq1bcrMzEbrleYjdY5x8GhCIJEBCEWqetQXyEoyVxVlPclSfcBMQjwycBo8LCCH9ea47Q3zMgJtNhtePx6P+dWEcWX/CrAtyksiqngZCeV64NfAkyyi+hDBgJDqw57/6ihs1e9/nq+h+w8Y/CW5FRF9IgAAAABJRU5ErkJggg==">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Azeret+Mono:wght@400;600&display=swap" rel="stylesheet">
    <style>
        *, *:before, *:after {
        box-sizing: inherit;
        }

        body, h1, h2, h3, h4, h5, h6, p, ol, ul {
        margin: 0;
        padding: 0;
        font-weight: normal;
        color: #fff;
        }

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body { 
            font-family: 'Azeret Mono', monospace;
            font-size: 16px;
            background-color: #1E1E1E;
            color: #fff;
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 80px 40px 20px;
        }

        .content {
            flex: 1 0 auto;
        }


        .logo svg {
            fill: #2C2C2C;
            transition: all .3s ease-in-out;
        }

        .logo:hover svg {
            fill: #fff;
        }
        .flex-end {
            display: flex;
            flex-flow: column;
            align-items: center;
            justify-content: space-between;
            margin-top: 40px;
        }
        .inputWrapper{
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        h1 {
            font-weight: 700;
            font-size: 32px;
            margin: 40px 0 40px 0;
            text-align: center;
        }

        input {
            padding: 20px 35px;
            background-color: #2C2C2C;
            border: 2px solid #444444;
            color: #fff;
            border-radius: 15px;
            font-family: 'Azeret Mono', monospace;
            font-size: 16px;
            height: 19px;
            margin-left: 10px;
            margin-right: 10px;
            width: 30vw;
            box-sizing: unset;
        }

        .downloadWrapper, #qrcode {
            display: flex;
            justify-content: center;
        }

        #qrcode {
            margin: 20px 0 40px 0;
        }

        #qrcode svg {
            border-radius: 15px;
        }

        .button {
        background-color: #2C2C2C;
        font-family: 'Azeret Mono', monospace;
        font-size: 16px;
        font-weight: 500;
        color: #fff;
        text-decoration: none;
          display: inline-block;
          padding: 20px 30px;
          margin: 5px;
          cursor: pointer;
          border: 2px solid transparent;
          transition: all 0.3s ease-in-out; /* Ensures smooth transition for background and borders */
          border-radius: 10px;
      }
      .qr-svg-download {
        background-color: #D2EE3A;
            color: #1E1E1E;
          margin-bottom: 40px;
      }
      .qr-svg-download:hover{
        border: 2px solid #5e6d09;
            transform: translateY(2px);
      }
      .button:hover { border: 2px solid #444444; }

      button svg, .button svg{
            margin-right: 10px;
            fill: #5e6d09;
            transition: all .3s ease-in-out;
        }

      footer {
            flex-shrink: 0;
            border-top: #444444 1px solid;
            padding-top: 10px;
            max-width: 1200px;
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            margin-top: 20px;
        }

        .logo_footer svg {
        fill: #2C2C2C;
        width: 40px;
    }

        footer p {
            color: #444444;
            margin: 0;
        }
    .hidden {
            display: none;
        }
.url-input, #vcardInputs {
            margin: 40px 0;
        }
        .input-group {
        display: flex;
        flex-direction: column;
    }

    #vcardInputs input {
        margin-bottom: 20px;
    }
    #vcardInputs label {
        margin-bottom: 10px;
    }
    </style>
</head>
<body>
    <div class="content">
        <header>
            <a class="logo" href="https://x-g.ca"><svg width="117" height="43" viewBox="0 0 117 43" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M31.5588 0H39.3621L27.8032 37.8796H20L31.5588 0ZM108.823 7.41211V11.5891C106.319 8.14923 101.938 6.59308 96.8047 6.59308C89.5857 6.59308 82.3667 10.033 82.3667 19.2879C82.3667 28.5428 89.5857 31.9827 96.8047 31.9827C101.938 31.9827 106.319 30.4266 108.823 26.9867V28.8295C108.823 34.235 105.776 36.0369 99.5171 36.0369C94.76 36.0369 90.1282 35.2588 85.1626 34.2759L84.2444 40.3367C88.7095 41.3605 94.5098 42.3842 101.228 42.3842C111.493 42.3842 116.793 38.4939 116.834 28.9933V7.41211H108.823ZM108.823 19.2879C108.823 23.1373 106.027 25.3486 99.8093 25.3486C93.5918 25.3486 90.7959 23.1373 90.7959 19.2879C90.7959 15.4794 93.5918 13.2271 99.8093 13.2271C106.027 13.2271 108.823 15.4794 108.823 19.2879ZM44.4685 31.737H55.3596L63.2881 23.9153L71.2166 31.737H82.1077L68.5876 19.5745L82.1077 7.41211H71.2166L63.2881 15.2338L55.3596 7.41211H44.4685L57.9885 19.5745L44.4685 31.737ZM7.29492 26.3707L2.8208 22.3233L11.0527 22.3234V20.99H2.82227L7.29492 16.9427L6.2522 16L0 21.6567L6.25293 27.3134L7.29492 26.3707Z"/>
                </svg></a>
        </header>
        <div class="flex-end">
            <h1>QR Code Generator</h1>
            <div>
                <button class="button" onclick="setType('url')">URL</button>
                <button class="button" onclick="setType('vcard')">vCard</button>
            </div>
            <div class="url-input">
                <label for="urlInput">URL:</label>
                <input type="text" id="urlInput" class="full-width" placeholder="https://www.metah.ca">
            </div>
        <div id="vcardInputs" class="hidden">
            <div class="input-group">
                <label for="firstName">First Name:</label>
                <input type="text" id="firstName">
                <label for="lastName">Last Name:</label>
                <input type="text" id="lastName">
            </div>
            <div class="input-group">
                <label for="mobile">Mobile:</label>
                <input type="text" id="mobile" class="full-width">
            </div>
            <div class="input-group">
                <label for="email">Email:</label>
                <input type="text" id="email" class="full-width">
            </div>
            <div class="input-group">
                <label for="company">Company:</label>
                <input type="text" id="company">
                <label for="jobTitle">Job Title:</label>
                <input type="text" id="jobTitle">
            </div>
            <div class="input-group">
                <label for="street">Street:</label>
                <input type="text" id="street" class="full-width">
            </div>
            <div class="input-group">
                <label for="city">City:</label>
                <input type="text" id="city" class="full-width">
            </div>
            <div class="input-group">
                <label for="zip">Postal Code:</label>
                <input type="text" id="zip" class="full-width">
            </div>
            <div class="input-group">
                <label for="state">State/Province:</label>
                <input type="text" id="state" class="full-width">
            </div>
            <div class="input-group">
                <label for="country">Country:</label>
                <input type="text" id="country" class="full-width">
            </div>
            <div class="input-group">
                <label for="website">Website:</label>
                <input type="text" id="website" class="full-width">
            </div>            
        </div>
        </div>
            <div id="qrcode"></div>
            <div class="downloadWrapper">
                <button class="button qr-svg-download" onclick="downloadSVG()"><svg width="12" height="14" viewBox="0 0 12 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 12.5263H12V14H0V12.5263ZM6.66667 8.232L10.714 3.75789L11.6567 4.79979L6 11.0526L0.343333 4.80053L1.286 3.75789L5.33333 8.23053V0H6.66667V8.232Z"/>
                    </svg>SVG</button>
            </div>
        </div>
    </div>
    <footer>
        <a href="" class="logo_footer"><svg viewBox="0 0 97 43" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M88.8226 11.5891V7.4121H96.8345V28.9933C96.7928 38.4939 91.4932 42.3842 81.228 42.3842C74.5097 42.3842 68.7094 41.3605 64.2445 40.3367L65.1625 34.2759C70.1282 35.2588 74.7601 36.0368 79.5171 36.0368C85.7764 36.0368 88.8226 34.235 88.8226 28.8295V26.9867C86.3189 30.4266 81.9374 31.9827 76.8048 31.9827C69.5857 31.9827 62.3667 28.5428 62.3667 19.2879C62.3667 10.033 69.5857 6.59308 76.8048 6.59308C81.9374 6.59308 86.3189 8.14922 88.8226 11.5891ZM79.8092 25.3486C86.0268 25.3486 88.8226 23.1373 88.8226 19.2879C88.8226 15.4794 86.0268 13.2271 79.8092 13.2271C73.5917 13.2271 70.7959 15.4794 70.7959 19.2879C70.7959 23.1373 73.5917 25.3486 79.8092 25.3486Z"/>
            <path d="M35.3597 31.737H24.4685L37.9886 19.5746L24.4685 7.41211H35.3597L43.2881 15.2337L51.2165 7.41211H62.1077L48.5876 19.5746L62.1077 31.737H51.2165L43.2881 23.9154L35.3597 31.737Z"/>
            <path d="M11.5588 0H19.362L7.80324 37.8797H0L11.5588 0Z"/>
            </svg>
        </a>
        <p>Â© Copyright <span id="currentYear"></span>, Xavier Godbout</p>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/qrcode-svg"></script>
    <script>
        document.getElementById('currentYear').textContent = new Date().getFullYear();
        
        let currentType = 'url'; // Default type
    
        function setType(type) {
            currentType = type;
            const urlInput = document.querySelector('.url-input');
            const vcardInputs = document.getElementById('vcardInputs');
            if (type === 'vcard') {
                vcardInputs.classList.remove('hidden');
                urlInput.classList.add('hidden');
            } else {
                vcardInputs.classList.add('hidden');
                urlInput.classList.remove('hidden');
            }
            generateQRCode();
        }
    
        function generateQRCode() {
            let content;
            if (currentType === 'url') {
                let url = document.getElementById('urlInput').value;
                content = url.trim() ? url : 'https://metah.ca';
            } else {
                content = buildVCard();
            }
            let qr = new QRCode({
                content: content,
                padding: 4,
                width: 256,
                height: 256,
                color: "#000000",
                background: "#ffffff",
                ecl: "M" // Error Correction Level
            });
            document.getElementById('qrcode').innerHTML = qr.svg();
        }
    
        function buildVCard() {
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const mobile = document.getElementById('mobile').value;
            const email = document.getElementById('email').value;
            const company = document.getElementById('company').value;
            const jobTitle = document.getElementById('jobTitle').value;
            const street = document.getElementById('street').value;
            const city = document.getElementById('city').value;
            const zip = document.getElementById('zip').value;
            const state = document.getElementById('state').value;
            const country = document.getElementById('country').value;
            const website = document.getElementById('website').value;
    
            return `BEGIN:VCARD\nVERSION:3.0\nN:${lastName};${firstName};;;\nFN:${firstName} ${lastName}\nORG:${company}\nTITLE:${jobTitle}\nTEL;TYPE=CELL:${mobile}\nEMAIL:${email}\nADR;TYPE=WORK:;;${street};${city};${state};${zip};${country}\nURL:${website}\nEND:VCARD`;
        }

        function downloadSVG() {
            const svgElement = document.getElementById('qrcode').querySelector('svg');
            if (!svgElement) return; // Ensure there is an SVG to download

            let filename = '';
            if (currentType === 'url') {
                let url = document.getElementById('urlInput').value.trim();
                if (url) {
                    const urlObject = new URL(url.startsWith('http://') || url.startsWith('https://') ? url : `https://${url}`);
                    filename = urlObject.hostname.replace(/\./g, '_'); // Replace dots with underscores
                }
                filename = filename || 'default'; // Fallback to 'default' if URL is empty or invalid
            } else {
                const firstName = document.getElementById('firstName').value;
                const lastName = document.getElementById('lastName').value;
                filename = `${firstName}_${lastName}` || 'vCard_default'; // Use first name and last name, fallback to 'vCard_default'
            }

            downloadAsSVG(svgElement.outerHTML, filename + '.svg');
        }


        function downloadAsSVG(svgData, filename) {
            const blob = new Blob([svgData], { type: 'image/svg+xml' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

    
        // Add event listeners
        document.getElementById('urlInput').addEventListener('input', generateQRCode);
        Array.from(document.querySelectorAll('#vcardInputs input')).forEach(input => {
            input.addEventListener('input', generateQRCode);
        });
    
        window.onload = () => setType('url'); // Set default to URL type
    </script>
    
</body>
</html>
